<?xml version="1.0" encoding="UTF-8"?>
<!--For PDF version (standard)-->
<!-- <?xml-stylesheet href="docbook/xsl/fo/docbook.xsl" type="text/xsl" ?>-->
<!--For PDF version-->
<!-- <?xml-stylesheet href="ONVIF-stylesheets/onvif-specification-fo-us.xsl" type="text/xsl" ?>-->
<!--For online version-->
<?xml-stylesheet href="docbook-css/docbook.xsl" type="text/xsl" ?>
<!--For PDF version - New ONVIF-->
<!--<?xml-stylesheet href="../ONVIFNew-stylesheets/onvif-specification-fo-us.xsl" type="text/xsl" ?>-->
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xml="http://www.w3.org/XML/1998/namespace" xsi:schemaLocation="http://docbook.org/ns/docbook http://docbook.org/xml/5.0/xsd/docbook.xsd" version="0.1" xml:id="ONVIF_Replay_Control_Device_TS">
    <info>
        <orgname>
            <phrase>
                <trademark class="registered">ONVIF</trademark>
            </phrase>
        </orgname>
        <title>Replay Control Device Test Specification</title>
        <subtitle>Version 19.12</subtitle>
        <date>December 2019</date>
        <copyright>
            <year>2019</year>
            <holder>ONVIF, Inc. All rights reserved.</holder>
        </copyright>
        <address>
            <uri>www.onvif.org</uri>
        </address>
        <legalnotice role="notices">
            <para>
                Recipients of this document may copy, distribute, publish, or display this
                document so long as this copyright notice, license and disclaimer are retained with
                all copies of the document. No license is granted to modify this document.
            </para>
            <para>
                THIS DOCUMENT IS PROVIDED "AS IS," AND THE CORPORATION AND ITS MEMBERS AND THEIR
                AFFILIATES, MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT
                NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,
                NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THIS DOCUMENT ARE SUITABLE FOR ANY
                PURPOSE; OR THAT THE IMPLEMENTATION OF SUCH CONTENTS WILL NOT INFRINGE ANY PATENTS,
                COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.
            </para>
            <para>
                IN NO EVENT WILL THE CORPORATION OR ITS MEMBERS OR THEIR AFFILIATES BE LIABLE FOR
                ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL, PUNITIVE OR CONSEQUENTIAL DAMAGES,
                ARISING OUT OF OR RELATING TO ANY USE OR DISTRIBUTION OF THIS DOCUMENT, WHETHER OR
                NOT (1) THE CORPORATION, MEMBERS OR THEIR AFFILIATES HAVE BEEN ADVISED OF THE
                POSSIBILITY OF SUCH DAMAGES, OR (2) SUCH DAMAGES WERE REASONABLY FORESEEABLE, AND
                ARISING OUT OF OR RELATING TO ANY USE OR DISTRIBUTION OF THIS DOCUMENT. THE
                FOREGOING DISCLAIMER AND LIMITATION ON LIABILITY DO NOT APPLY TO, INVALIDATE, OR
                LIMIT REPRESENTATIONS AND WARRANTIES MADE BY THE MEMBERS AND THEIR RESPECTIVE
                AFFILIATES TO THE CORPORATION AND OTHER MEMBERS IN CERTAIN WRITTEN POLICIES OF THE
                CORPORATION.
            </para>
        </legalnotice>
        <revhistory>


            <revision>
                <revnumber>12.12</revnumber>
                <date>20th/Dec, 2012</date>
                <revdescription>
                    <para>
                        First issue of Replay Control Test Specification
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>13.06</revnumber>
                <date>Jun, 2013</date>
                <revdescription>
                    <para>
                        Formatting and spelling updates.
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>13.12</revnumber>
                <date>Dec, 2014</date>
                <revdescription>
                    <para>
                        The following test cases updated with ID change:
                    </para>
                    <para>
                        PLAYBACK VIDEO STREAMING – PAUSE WITHOUT RANGE 
                    </para>
                    <para>
                        PLAYBACK VIDEO STREAMING – PAUSE WITH RANGE 
                    </para>
                    <para>
                        PLAYBACK AUDIO STREAMING – PAUSE WITHOUT RANGE 
                    </para>
                    <para>
                        PLAYBACK AUDIO STREAMING – PAUSE WITH RANGE
                    </para>
                    <para>
                        PLAYBACK METADATA STREAMING – PAUSE WITHOUT RANGE
                    </para>
                    <para>
                        PLAYBACK METADATA STREAMING – PAUSE WITH RANGE
                    </para>
                    <para>
                        PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – PAUSE WITHOUT RANGE
                    </para>
                    <para>
                        PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – PAUSE WITH RANGE
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>14.06</revnumber>
                <date>Jun, 2014</date>
                <revdescription>
                    <para>
                        The following test cases updated with ID change:
                    </para>
                    <para>
                        PLAYBACK VIDEO STREAMING – SEEK
                    </para>
                    <para>
                        PLAYBACK AUDIO STREAMING – SEEK
                    </para>
                    <para>
                        PLAYBACK METADATA STREAMING – SEEK
                    </para>
                    <para>
                        PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – SEEK
                    </para>
                    <para>
                        Annex A.2 Recording Environment Pre-Requisite was updated
                    </para>
                </revdescription>
            </revision>

            <revision>
                <revnumber>17.06</revnumber>
                <date>Mar 27, 2017</date>
                <revdescription>
                    <para>
                        REPLAY-4-1-1 REPLAY CONFIGURATION was added according to #1342.
                    </para>
                    <para>
                        GETREPLAYURI COMMAND WITH INVALID RECORDING TOKEN test case was moved into ‘Get URI’ section to synchronize structure with the Device Test Tool.
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>17.12</revnumber>
                <date>Oct 06, 2017</date>
                <revdescription>
                    <para>
                        The following Annex was added according to #1285:
                    </para>
                    <para>
                        RTSP Authentication Check
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>18.06</revnumber>
                <date>Jun, 2018</date>
                <revdescription>
                    <para>
                        Reformatting document using new template
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>18.12</revnumber>
                <date>Oct 2, 2018</date>
                <revdescription>
                    <para>
                        The following were updated in the scope of #1686:
                    </para>
                    <para>
                        Test sequences were removed
                    </para>
                    <para>
                        REPLAY-3-1-12 PLAYBACK VIDEO STREAMING – RATECONTROL (updated to use RTP-Unicast/RTSP/HTTP/TCP transport)
                    </para>
                    <para>
                        REPLAY-3-2-11 PLAYBACK AUDIO STREAMING – RATECONTROL (updated to use RTP-Unicast/RTSP/HTTP/TCP transport)
                    </para>
                    <para>
                        REPLAY-3-3-11 PLAYBACK METADATA STREAMING – RATECONTROL (updated to use RTP-Unicast/RTSP/HTTP/TCP transport)
                    </para>
                    <para>
                        REPLAY-3-4-11 PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – RATECONTROL (updated to use RTP-Unicast/RTSP/HTTP/TCP transport)
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>18.12</revnumber>
                <date>Oct 5, 2018</date>
                <revdescription>
                    <para>
                        The following were updated in the scope of #1622:
                    </para>
                    <para>
                        REPLAY-3-1-12 PLAYBACK VIDEO STREAMING – RATECONTROL (step 21 with comparison of streaming time removed)
                    </para>
                    <para>
                        REPLAY-3-2-11 PLAYBACK AUDIO STREAMING – RATECONTROL (step 21 with comparison of streaming time removed)
                    </para>
                    <para>
                        REPLAY-3-3-11 PLAYBACK METADATA STREAMING – RATECONTROL (step 21 with comparison of streaming time removed)
                    </para>
                    <para>
                        REPLAY-3-4-11 PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – RATECONTROL (step 21 with comparison of streaming time removed)
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>18.12</revnumber>
                <date>Dec 21, 2018</date>
                <revdescription>
                    <para>
                        Switching Hub description in 'Network Configuration for DUT' section was updated according to #1737
                    </para>
                </revdescription>
            </revision>
            <revision>
                <revnumber>19.12</revnumber>
                <date>Aug 30, 2019</date>
                <revdescription>
                    <para>
                        The following were changed according to #1783:

                    </para>
                    <para>
                    Annex A.5 Check of IP address type in response to RTSP DESCRIBE (added)

                    </para>
                    <para>
                        All test cases from the following sections are updated to use Annex A.5:

                    </para>
                    <para>
                        Playback Control – Video Streaming

                    </para>
                    <para>
                        Playback Control – Audio Streaming

                    </para>
                    <para>
                        Playback Control – Metadata Streaming
                    </para>
                    <para>
                        Playback Control – Video, Audio and Metadata Streaming
                    </para>
                </revdescription>
            </revision>


        </revhistory>
    </info>
    <chapter xml:id="s.intro">
        <title>Introduction</title>
        <para>
            The goal of the ONVIF test specification set is to make it possible to realize fully interoperable IP physical security implementation from different vendors. The set of ONVIF test specification describes the test cases need to verify the [ONVIF Network Interface Specs] and [ONVIF Conformance] requirements. It also describes the test framework, test setup, pre-requisites, test policies needed for the execution of the described test cases.
        </para>
        <para>
            This ONVIF Replay Control Test Specification acts as a supplementary document to the [ONVIF Network Interface Specs], illustrating test cases need to be executed and passed. And also this specification acts as an input document to the development of test tool which will be used to test the ONVIF device implementation conformance towards ONVIF standard. This test tool is referred as ONVIF Client hereafter.
        </para>
        <section xml:id="s.intro.scope">
            <title>Scope</title>
            <para>
                This ONVIF Replay Control Test Specification defines and regulates the conformance testing procedure for the ONVIF conformant devices. Conformance testing is meant to be functional black-box testing. The objective of this specification is to provide the test cases to test individual requirements of ONVIF devices according to ONVIF core services which are defined in [ONVIF Network Interface Specs].
            </para>
            <para>
                The principal intended purposes are:
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>Provide self-assessment tool for implementations.</para>
                    </listitem>
                    <listitem>
                        <para>
                            Provide comprehensive test suite coverage for [ONVIF Network Interface Specs].
                        </para>
                    </listitem>
                </orderedlist>
            </para>
            <para>
                This specification does not address the following:
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>
                            Product use cases and non-functional (performance and regression) testing.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            SOAP Implementation Interoperability test i.e. Web Service Interoperability Basic Profile version 2.0 (WS-I BP 2.0).
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Network protocol implementation Conformance test for HTTPS, HTTP, RTP and RTSP protocols.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Wi-Fi Conformance test
                        </para>
                    </listitem>
                </orderedlist>
            </para>
            <para>
                The set of ONVIF Test Specification will not cover the complete set of requirements as defined in [ONVIF Network Interface Specs]; instead it would cover its subset.
            </para>
            <para>
                This ONVIF Replay Control Test Specification covers ONVIF Replay Control service which is a functional block of [ONVIF Network Interface Specs]. The following sections describe the brief overview and scope of each functional block.
            </para>
            <section xml:id="s.intro.scope.capabilities">
                <title>Capabilities</title>
                <para>
                    Capabilities test cases are covered for verification to get Replay Control Service capabilities. It means that GetServices and GetServiceCapabilities commands are covered by this test case.
                </para>

            </section>
            <section xml:id="s.intro.scope.PlaybackControl_VideoStreaming">
                <title>Playback Control – Video Streaming</title>
                <para>
                    Playback Control – Video Streaming covers the test cases needed for the verification of video replay streaming features as mentioned in [ONVIF Network Interface Specs]. Playback Control – Video Streaming section defines different video streaming options based on RTP for video playback streams. Stream control is done using RTSP protocol.
                </para>
                <para>
                    The scope of this specification is to cover the following playback streaming options for video streams:
                    <itemizedlist>
                        <listitem>
                            <para>
                                RTSP control requests including ONVIF RTSP Headers extensions
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP Unicast over UDP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP over RTSP over TCP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP over RTSP over HTTP over TCP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF RTP Header Extensions
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>

            </section>
            <section xml:id="s.intro.scope.PlaybackControl_AudioStreaming">
                <title>Playback Control – Audio Streaming</title>
                <para>
                    Playback Control – Audio Streaming covers the test cases needed for the verification of audio replay streaming features as mentioned in [ONVIF Network Interface Specs]. Playback Control – Audio Streaming section defines different audio streaming options based on RTP for audio playback streams. Stream control is done using RTSP protocol.
                </para>
                <para>
                    The scope of this specification is to cover the following playback streaming options for audio streams:
                    <itemizedlist>
                        <listitem>
                            <para>
                                RTSP control requests including ONVIF RTSP Headers extensions
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP Unicast over UDP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP over RTSP over TCP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP over RTSP over HTTP over TCP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF RTP Header Extensions
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>

            </section>
            <section xml:id="s.intro.scope.PlaybackControl_MetadataStreaming">
                <title>Playback Control – Metadata Streaming</title>
                <para>
                    Playback Control – Metadata Streaming covers the test cases needed for the verification of metadata replay streaming features as mentioned in [ONVIF Network Interface Specs]. Playback Control – Metadata Streaming section defines different audio streaming options based on RTP for metadata playback streams. Stream control is done using RTSP protocol.
                </para>
                <para>
                    The scope of this specification is to cover the following playback streaming options for metadata streams:
                    <itemizedlist>
                        <listitem>
                            <para>
                                RTSP control requests including ONVIF RTSP Headers extensions
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP Unicast over UDP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP over RTSP over TCP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP over RTSP over HTTP over TCP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF RTP Header Extensions
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>

            </section>
            <section xml:id="s.intro.scope.PlaybackControl_VideoAudioMetadataStreaming">
                <title>Playback Control – Video, Audio and Metadata Streaming</title>
                <para>
                    Playback Control – Video, Audio and Metadata Streaming covers the test cases needed for the verification of replay streaming features for video, Audio and metadata in combination as mentioned in [ONVIF Network Interface Specs]. Playback Control – Video, Audio and Metadata Streaming section defines different video, Audio and metadata streaming options based on RTP for playback streams. Stream control is done using RTSP protocol.
                </para>
                <para>
                    The scope of this specification to cover the following playback streaming options for media streams.
                    <itemizedlist>
                        <listitem>
                            <para>
                                RTSP control requests including ONVIF RTSP Headers extensions
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP Unicast over UDP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP over RTSP over TCP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTP over RTSP over HTTP over TCP
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF RTP Header Extensions
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>

            </section>

        </section>
    </chapter>
    <chapter xml:id="s.docbook">
        <title>Normative references</title>
        <itemizedlist>
            <listitem>
                <para>[ONVIF Conformance] ONVIF Conformance Process Specification:</para>
                <para>
                    <link xlink:href="https://www.onvif.org/profiles/conformance/">https://www.onvif.org/profiles/conformance/</link>
                </para>
            </listitem>
            <listitem>
                <para>[ONVIF Profile Policy] ONVIF Profile Policy:</para>
                <para>
                    <link xlink:href="https://www.onvif.org/profiles/">https://www.onvif.org/profiles/</link>
                </para>
            </listitem>
            <listitem>
                <para>[ONVIF Network Interface Specs] ONVIF Network Interface Specification documents:</para>
                <para>
                    <link xlink:href="https://www.onvif.org/profiles/specifications/">https://www.onvif.org/profiles/specifications/</link>
                </para>
            </listitem>
            <listitem>
                <para>[ONVIF Core Specs] ONVIF Core Specifications:</para>
                <para>
                    <link xlink:href="https://www.onvif.org/profiles/specifications/">https://www.onvif.org/profiles/specifications/</link>
                </para>
            </listitem>
            <listitem>
                <para>[ONVIF Recording Service Specs] ONVIF Recording Control Specifications:</para>
                <para>
                    <link xlink:href="https://www.onvif.org/profiles/specifications/">https://www.onvif.org/profiles/specifications/</link>
                </para>
            </listitem>
            <listitem>
                <para>[ONVIF Base Test] ONVIF Base Device Test Specification:</para>
                <para>
                    <link xlink:href="https://www.onvif.org/profiles/conformance/device-test/">https://www.onvif.org/profiles/conformance/device-test/</link>
                </para>
            </listitem>
            <listitem>
                <para>[ISO/IEC Directives, Part 2] ISO/IEC Directives, Part 2, Annex H:</para>
                <para>
                    <link xlink:href="http://www.iso.org/directives">http://www.iso.org/directives</link>
                </para>
            </listitem>
            <listitem>
                <para>[ISO 16484-5] ISO 16484-5:2014-09 Annex P:</para>
                <para>
                    <link xlink:href="https://www.iso.org/obp/ui/#!iso:std:63753:en">https://www.iso.org/obp/ui/#!iso:std:63753:en</link>
                </para>
            </listitem>
            <listitem>
                <para>[SOAP 1.2, Part 1] W3C SOAP 1.2, Part 1, Messaging Framework:</para>
                <para>
                    <link xlink:href="http://www.w3.org/TR/soap12-part1/">http://www.w3.org/TR/soap12-part1/</link>
                </para>
            </listitem>
            <listitem>
                <para>[XML-Schema, Part 1] W3C XML Schema Part 1: Structures Second Edition:</para>
                <para>
                    <link xlink:href="http://www.w3.org/TR/xmlschema-1/">http://www.w3.org/TR/xmlschema-1/</link>
                </para>
            </listitem>
            <listitem>
                <para>[XML-Schema, Part 2] W3C XML Schema Part 2: Datatypes Second Edition:</para>
                <para>
                    <link xlink:href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</link>
                </para>
            </listitem>
            <listitem>
                <para>[WS-Security] "Web Services Security: SOAP Message Security 1.1 (WS-Security 2004)", OASIS Standard, February 2006.:</para>
                <para>
                    <link xlink:href="http://www.oasis-open.org/committees/download.php/16790/wss-v1.1-spec-os-SOAPMessageSecurity.pdf">http://www.oasis-open.org/committees/download.php/16790/wss-v1.1-spec-os-SOAPMessageSecurity.pdf</link>
                </para>
            </listitem>
        </itemizedlist>
    </chapter>

    <chapter xml:id="additions">
        <title>Terms and Definitions</title>
        <section xml:id="additions.conventions">
            <title>Conventions</title>
            <para>
                The key words “shall”, “shall not”, “should”, “should not”, “may”, “need not”, “can”, “cannot” in this specification are to be interpreted as described in [ISO/IEC Directives].
            </para>
        </section>
        <section xml:id="additions.definitions">
            <title>Definitions</title>
            <para>This section defines terms that are specific to the ONVIF Replay Control Service and tests. For the list of applicable general terms and definitions, please see [ONVIF Base Test].</para>
            <variablelist>
                <varlistentry>
                    <term>Track</term>
                    <listitem>
                        <para>
                            An individual data channel consisting of video, audio, or metadata. This definition is consistent with the definition of track in [RFC 2326]
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Metadata</term>
                    <listitem>
                        <para>
                            All streaming data except video and audio, including video analytics results, PTZ position data and other metadata (such as textual data from POS applications).
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Recording</term>
                    <listitem>
                        <para>
                            A container for a set of audio, video and metadata tracks. A recording can hold one or more tracks. A track is viewed as an infinite timeline that holds data at certain times.
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
        <section xml:id="additions.abbreviations">
            <title>Abbreviations</title>
            <para>This section describes abbreviations used in this document.</para>
            <variablelist>
                <varlistentry>
                    <term>DUT</term>
                    <listitem>
                        <para>Device Under Test</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>HTTP</term>
                    <listitem>
                        <para>Hyper Text Transport Protocol</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>RTCP</term>
                    <listitem>
                        <para>RTP Control Protocol</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>RTSP</term>
                    <listitem>
                        <para>Real Time Streaming Protocol</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>RTP</term>
                    <listitem>
                        <para>Real-time Transport Protocol</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>SDP</term>
                    <listitem>
                        <para>Session Description Protocol</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>TCP</term>
                    <listitem>
                        <para>Transport Control Protocol</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>UTC</term>
                    <listitem>
                        <para>Coordinated Universal Time</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>UDP</term>
                    <listitem>
                        <para>User Datagram Protocol</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>URI</term>
                    <listitem>
                        <para>Uniform Resource Identifier</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>WSDL</term>
                    <listitem>
                        <para>Web Services Description Language</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>WS-I BP 2.0</term>
                    <listitem>
                        <para>Web Services Interoperability Basic Profile version 2.0</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>XML</term>
                    <listitem>
                        <para>eXtensible Markup Language</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
    </chapter>
    <chapter xml:id="overview">
        <title>Test Overview</title>
        <para>
            This section provides information the test setup procedure and required prerequisites, and the test policies that should be followed for test case execution.
        </para>
        <section xml:id="overview.test_setup">
            <title>Test Setup</title>
            <section xml:id="overview.test_setup.network_configuration">
                <title>Network Configuration for DUT</title>
                <para>
                    The generic test configuration for the execution of test cases defined in this document is as shown below (Figure 4.1).
                </para>
                <para>
                    Based on the individual test case requirements, some of the entities in the below setup may not be needed for the execution of those corresponding test cases.
                </para>
                <figure>
                    <title>Test Configuration for DUT</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="test_network.png" format="PNG" scalefit="0"/>
                        </imageobject>
                        <textobject>
                            <phrase>Test Configuration for DUT</phrase>
                        </textobject>
                    </mediaobject>
                </figure>
                <para>
                    <emphasis role="bold">DUT:</emphasis> ONVIF device to be tested. Hereafter, this is referred to as DUT (Device Under Test).
                </para>
                <para>
                    <emphasis role="bold">ONVIF Client (Test Tool):</emphasis> Tests are executed by this system and it controls the behavior of the DUT. It handles both expected and unexpected behavior.
                </para>
                <para>
                    <emphasis role="bold">HTTP Proxy:</emphasis> provides facilitation in case of RTP and RTSP tunneling over HTTP.
                </para>
                <para>
                    <emphasis role="bold">Wireless Access Point:</emphasis> provides wireless connectivity to the devices that support wireless connection.
                </para>
                <para>
                    <emphasis role="bold">DNS Server:</emphasis> provides DNS related information to the connected devices.
                </para>
                <para>
                    <emphasis role="bold">DHCP Server:</emphasis> provides IPv4 Address to the connected devices.
                </para>
                <para>
                    <emphasis role="bold">NTP Server:</emphasis> provides time synchronization between ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Switching Hub:</emphasis> provides network connectivity among all the test equipments in the test environment. All devices should be connected to the Switching Hub.
                    When running multiple test instances in parallel on the same network, the Switching Hub should be configured to use filtering in order to avoid multicast traffic being flooded to all ports, because this may affect test stability.
                </para>
                <para>
                    <emphasis role="bold">Router:</emphasis> provides router advertisements for IPv6 configuration.
                </para>
            </section>
        </section>
        <section xml:id="overview.prerequisites">
            <title>Prerequisites</title>
            <para>
                The pre-requisites for executing the test cases described in this Test Specification are:
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>
                            The DUT shall be configured with an IPv4 address.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The DUT shall be IP reachable [in the test configuration].
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The DUT shall be available for being discovered by the ONVIF Client Test Tool.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The DUT shall be configured with the time, i.e. manual configuration of UTC time and if NTP is supported by the DUT then NTP time shall be synchronized with NTP Server.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The DUT time and Test tool time shall be synchronized with each other either manually or by a common NTP server.
                        </para>
                    </listitem>

                </orderedlist>
            </para>

        </section>
        <section xml:id="overview.test_policy">
            <title>Test Policy</title>
            <para>
                This section describes the test policies specific to the test case execution of each functional block.
            </para>
            <para>
                The DUT shall adhere to the test policies defined in this section.
            </para>
            <section xml:id="overview.test_policy.capabilities">
                <title>Capabilities</title>
                <para>
                    The device under test shall demonstrate replay control service capability both in GetServices and GetServiceCapabilities responses. A DUT that does not display replay control service capability constitutes failure of test procedure.
                </para>
                <para>
                    Please refer to <xref linkend="tc.replay.capabilities"/> for Capabilities Test Cases.
                </para>

            </section>
            <section xml:id="overview.test_policy.PlaybackControl_VideoStreaming">
                <title>Playback Control – Video Streaming</title>
                <para>
                    Replay streaming test case execution would need the recording with video data. So device shall have at least one recording with video data. ONVIF Client shall explicitly specify the recording token for them.
                </para>
                <para>
                    DUT shall give the Replay Control Service entry point by Services command.
                </para>
                <para>
                    Please refer to <xref linkend="tc.replay.VideoStreaming"/> for Playback Control Video Streaming Test Cases.
                </para>
                <para>
                    Please refer to <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/> for Recording Environment Pre-Requisite.
                </para>
            </section>
            <section xml:id="overview.test_policy.PlaybackControl_AudioStreaming">
                <title>Playback Control – Audio Streaming</title>
                <para>
                    Replay streaming test case execution would need the recording with audio data. So device shall have at least one recording with audio data, if Audio Recording is supported. ONVIF Client shall explicitly specify the recording token for it.
                </para>
                <para>
                    DUT shall give the Replay Control Service entry point by Services command.
                </para>
                <para>
                    Please refer to <xref linkend="tc.replay.AudioStreaming"/> for Playback Control Audio Streaming Test Cases.
                </para>
                <para>
                    Please refer to <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/> for Recording Environment Pre-Requisite.
                </para>

            </section>
            <section xml:id="overview.test_policy.PlaybackControl_MetadataStreaming">
                <title>Playback Control – Metadata Streaming</title>
                <para>
                    Replay streaming test case execution would need the recording with metadata data. So device shall have at least one recording with metadata data, if Metadata Recording is supported. ONVIF Client shall explicitly specify the recording token for it.
                </para>
                <para>
                    DUT shall give the Replay Control Service entry point by Services command.
                </para>
                <para>
                    Please refer to <xref linkend="tc.replay.MetadataStreaming"/> for Playback Control Metadata Streaming Test Cases.
                </para>
                <para>
                    Please refer to <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/> for Recording Environment Pre-Requisite.
                </para>

            </section>
            <section xml:id="overview.test_policy.PlaybackControl_VideoAudioMetadataStreaming">
                <title>Playback Control – Video, Audio and Metadata Streaming</title>
                <para>
                    Replay streaming test case execution would need the recording with both video data, audio data (if Audio Recording is supported), and metadata data (if Metadata Recording is supported). So device shall have at least one recording with both video data, audio data (if Audio Recording is supported), and metadata data (if Metadata Recording is supported). ONVIF Client shall explicitly specify the recording token for it.
                </para>
                <para>
                    DUT shall give the Replay Control Service entry point by Services command.
                </para>
                <para>
                    Please refer to <xref linkend="tc.replay.VideoAudioMetadataStreaming"/> for Playback Control Video, Audio and Metadata Streaming Test Cases.
                </para>
                <para>
                    Please refer to <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/> for Recording Environment Pre-Requisite.
                </para>

            </section>

            <section xml:id="overview.test_policy.Authentication">
                <title>Authentication method selection as a testing framework</title>
                <para>
                    According to later version of [ONVIF Core Specs ONVIF client is required to support both HTTP digest and WS-UsernameToken functionality as authentication functionality. Therefore, ONVIF Client (ONVIF Device Test Tool in this context) as a testing framework shall properly select authentication method between the two based on the response from DUT toward specific request. The following is the deterministic procedure on which authentication method is to be selected.
                </para>
                <para>
                    <emphasis role="bold">Procedure</emphasis>:
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>
                        <listitem>
                            <para>
                                ONVIF Client invokes a specific command which is under testing without any user credentials (no WS-UsernameToken, no HTTP digest authentication header).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                If DUT returns a correct response, then ONVIF Client determines that DUT does not require any user authentication toward the command according to the configured security policy.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                If DUT returns HTTP 401 Unauthorized error along with WWW-Authentication: Digest header, then ONVIF Client determines that DUT supports HTTP digest authentication. ONVIF Client shall provide the proper level of user credential to continue the test procedure.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                If DUT returns SOAP fault (Sender/NotAuthorized) message, then ONVIF Client determines that WS-UsernameToken is supported by DUT. ONVIF Client shall provide the proper level of user credential to continue the test procedure.
                            </para>
                        </listitem>
                    </orderedlist>
                </para>


            </section>

        </section>
    </chapter>
    <!--Replay Control Test Cases-->
    <chapter xml:id="tc.replay">
        <title>Replay Control Test Cases</title>
        <!-- Capabilities -->
        <section xml:id="tc.replay.capabilities" xreflabel="Section 5.1">
            <title>Capabilities</title>

            <!-- REPLAY-1-1-1 -->
            <section xml:id="tc.REPLAY-1-1-1">
                <title>REPLAY SERVICE CAPABILITIES</title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-1-1-1
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Capability exchange
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> GetServiceCapabilities (for Replay Service)
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify Replay Service Capabilities of the DUT.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Replay Service was received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>

                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>
                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetServiceCapabilitiesRequest</emphasis> message to retrieve replay service capabilities of the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                    </orderedlist>
                </para>

                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passes all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis> 
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send valid <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis>.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
            </section>
            <!-- REPLAY-1-1-2 -->
            <section xml:id="tc.REPLAY-1-1-2">
                <title>GET SERVICES AND GET REPLAY SERVICE CAPABILITIES CONSISTENCY</title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-1-1-2
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Capability exchange
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> GetServices, GetServiceCapabilities (for Replay Service)
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> devicemgmt.wsdl, replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify Get Services and Replay Service Capabilities consistency.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> None.
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>
                </para> 
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>
                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetServicesRequest</emphasis> message (<emphasis role="bold">IncludeCapability = true</emphasis>) to retrieve all services of the DUT with service capabilities.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetServicesResponse</emphasis> message from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetServiceCapabilitiesRequest</emphasis> message to retrieve Replay service capabilities of the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message from the DUT.
                            </para>
                        </listitem>
                    </orderedlist>
                </para>
                <para>
                    <emphasis role="bold">Test Result: </emphasis>
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL – </emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetServicesResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent different Capabilities in <emphasis role="bold">GetServicesResponse</emphasis> message and in <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> Service will be defined as Replay service if it has Namespace element that is equal to “http://www.onvif.org/ver10/replay/wsdl”.
                </para>
            </section>        
        </section>
        <!--Get URI-->
        <section xml:id="tc.replay.Get_URI" xreflabel="Section 5.2">
            <title>Get URI</title>
            <!--REPLAY-1-2-1-->
            <section xml:id="tc.REPLAY-1-2-1">
                <title>GETREPLAYURI COMMAND WITH INVALID RECORDING TOKEN</title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-1-2-1
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> GetReplayUri
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> GetReplayUri
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To check GetReplayUri command with invalid RecordingToken.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> None.
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>
                </para> 
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>
                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message with invalid RecordingToken (RecordingToken = <emphasis role="bold">[Nonexistent Token]</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the DUT generates a SOAP 1.2 fault message (<emphasis role="bold">InvalidArgVal /InvalidToken</emphasis>).
                            </para>
                        </listitem>
                    </orderedlist>
                </para>
                <para>
                    <emphasis role="bold">Test Result: </emphasis>
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL – </emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send the SOAP 1.2 fault message (<emphasis role="bold">InvalidArgVal/InvalidToken</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send correct SOAP 1.2 fault message.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> Other faults than specified in the test are acceptable, though the specified are preferable.
                </para>
            </section>


        </section>		
        <!--Playback Control – Video Streaming-->
        <section xml:id="tc.replay.VideoStreaming" xreflabel="Section 5.3">
            <title>Playback Control – Video Streaming</title>
            <!--REPLAY-3-1-1-->
            <section xml:id="tc.REPLAY-3-1-1">
                <title>
                    PLAYBACK VIDEO STREAMING – MEDIA CONTROL
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-1
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify RTSP control messages of the DUT for replay video streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure: </emphasis>
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken</emphasis> = <emphasis role="bold">“Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1</emphasis>, <emphasis role="bold">RecordingInformation.EarliestRecording = T1</emphasis>, <emphasis role="bold">RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken</emphasis> = <emphasis role="bold">Token1</emphasis>, <emphasis role="bold">Stream = “RTP-Unicast”</emphasis>, <emphasis role="bold">Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP OPTIONS</emphasis> control request to get the RTSP methods supported by DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and list of supported RTSP methods.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem> 
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the session description information in the SDP message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies tag with TrackReference in SDP message for each video track.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “Transport”, “Session” and “timeout” header fields in the <emphasis role="bold">SETUP</emphasis> response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>, <emphasis role="bold">“Range: clock = T1-”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “Session”, “RTP-Info”, “seq”, “uri” and “rtptime” header fields in the PLAY response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT transfers video streams over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis> 
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send mandatory RTSP commands <emphasis role="bold">DESCRIBE SETUP</emphasis>, <emphasis role="bold">PLAY</emphasis>, <emphasis role="bold">TEARDOWN</emphasis>, and <emphasis role="bold">OPTIONS</emphasis> in <emphasis role="bold">OPTIONS</emphasis> response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent SDP message with one or more video track without the TrackReference in corresponding format (a:x-onvif-track:&lt;TrackReference&gt;).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send correct video stream information in the SDP message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK response</emphasis> for <emphasis role="bold">RTSP OPTIONS</emphasis>, <emphasis role="bold">DESCRIBE</emphasis>, <emphasis role="bold">SETUP</emphasis> and <emphasis role="bold">PLAY</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send mandatory headers or fields in the <emphasis role="bold">SETUP</emphasis> response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send mandatory headers or fields in the <emphasis role="bold">PLAY</emphasis> response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session is terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header including replay header extension for video stream.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-1-2-->
            <section xml:id="tc.REPLAY-3-1-2">
                <title>
                    PLAYBACK VIDEO STREAMING – RTP-Unicast/UDP
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-2
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback video streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type 
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL – </emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY</emphasis> and <emphasis role="bold">TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header and RTP header extension for video stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.

                </para>
            </section>
            <!--REPLAY-3-1-3-->
            <section xml:id="tc.REPLAY-3-1-3">
                <title>
                    PLAYBACK VIDEO STREAMING – RTP-Unicast/RTSP/HTTP/TCP
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-3
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/HTTP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose: </emphasis>To verify playback video streaming based on HTTP Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information
                                        </para>
                                    </listitem> 
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type 
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis> 
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY</emphasis> and <emphasis role="bold">TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header and RTP header extension for video stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE: </emphasis>See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>
            <!--REPLAY-3-1-4-->
            <section xml:id="tc.REPLAY-3-1-4">
                <title>
                    PLAYBACK VIDEO STREAMING – RTP/RTSP/TCP
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-4
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback video streaming based on RTP/RTSP/TCP using RTSP tunnel.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “RTSP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type 
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over TCP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY</emphasis> and <emphasis role="bold">TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header and RTP header extension for video stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>
            <!--REPLAY-3-1-5-->
            <section xml:id="tc.REPLAY-3-1-5">
                <title>
                    REVERSE PLAYBACK VIDEO STREAMING – RTP-Unicast/UDP
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-5
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify reverse playback video streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis>
                                        </para>
                                    </listitem> 
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information
                                        </para>
                                    </listitem> 
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type 
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T2-”, “Scale: -1.0”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies Packet Transmission Order (GOPs are sent in reverse order, but packets within a GOP are sent in forward order).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the RTP sequence numbers. Verify that the RTP sequence numbers of packets are increment monotonically in the order of delivery, not in the intended order of playback.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks Timestamps (the RTP timestamps shell indicate times at which each frame should be rendered at the client).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send s valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send s valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY</emphasis> and <emphasis role="bold">TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header and RTP header extension for video stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent GOPs or packets within a GOP in wrong order.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent RTP packets with invalid sequence number.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent RTP packets with invalid timestamp.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>
            <!--REPLAY-3-1-6-->
            <section xml:id="tc.REPLAY-3-1-6">
                <title>
                    REVERSE PLAYBACK VIDEO STREAMING – RTP-Unicast/RTSP/HTTP/TCP
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-6
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/HTTP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify reverse playback video streaming based on HTTP Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type 
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T2-”, “Scale: -1.0”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message </emphasis>and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies Packet Transmission Order (GOPs are sent in reverse order, but packets within a GOP are sent in forward order).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the RTP sequence numbers. Verify that the RTP sequence numbers of packets are increment monotonically in the order of delivery, not in the intended order of playback.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks Timestamps (the RTP timestamps shell indicate times at which each frame should be rendered at the client).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid RTP header and RTP header extension for video stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent GOPs or packets within a GOP in wrong order.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent RTP packets with invalid sequence number.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent RTP packets with invalid timestamp.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>
            <!--REPLAY-3-1-7-->
            <section xml:id="tc.REPLAY-3-1-7">
                <title>
                    REVERSE PLAYBACK VIDEO STREAMING – RTP/RTSP/TCP
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-7
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify reverse playback video streaming based on RTP/RTSP/TCP using RTSP tunnel.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “RTSP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type 
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T2-”, “Scale: -1.0”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over TCP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies Packet Transmission Order (GOPs are sent in reverse order, but packets within a GOP are sent in forward order).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the RTP sequence numbers. Verify that the RTP sequence numbers of packets are increment monotonically in the order of delivery, not in the intended order of playback.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks Timestamps (the RTP timestamps shell indicate times at which each frame should be rendered at the client).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent GOPs or packets within a GOP in wrong order.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent RTP packets with invalid sequence number.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent RTP packets with invalid timestamp.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header and RTP header extension for video stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>
            <!--REPLAY-3-1-10-->
            <section xml:id="tc.REPLAY-3-1-10">
                <title>
                    PLAYBACK VIDEO STREAMING – PLAY WITH RANGE
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-10
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify stop of replay video streaming based on RTP/UDP Unicast Transport after specified time Range was reached.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem> 
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1 + delta”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT transfers video streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT stops transferring of video stream after the specified time <emphasis role="bold">T1 + delta</emphasis> was reached.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after specified time <emphasis role="bold">[T1 + delta]</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP OPTIONS, DESCRIBE, SETUP and PLAY</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not stop video streaming after specified time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header in video stream (RTP sequence number not in the orders of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1
                </para>.
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>
            <!--REPLAY-3-1-11-->
            <section xml:id="tc.REPLAY-3-1-11">
                <title>
                    PLAYBACK VIDEO STREAMING - I-FRAMES
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-11
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Frames header field.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify I-frames RTSP playback.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>). Recording contains H.264 or MPEG-4 encoding.
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video with H.264 or MPEG-4 encoding from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type 
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [start of recording]-”, “Frames: intra”</emphasis>) control request to initiate the video streaming with intra frame only.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that The DUT sends I-Frames only.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept a Frames header with a value of Intra.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header for video stream (RTP sequence number not in the order of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send at least one I-frame.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent other frames than I-frames.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>
            <!--REPLAY-3-1-12-->
            <section xml:id="tc.REPLAY-3-1-12">
                <title>
                    PLAYBACK VIDEO STREAMING – RATECONTROL
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-12
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Rate-Control header field.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify applying of Rate-Control value for playback video streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in sdp - SDP information
                                        </para>
                                    </listitem> 
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type 
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/AVP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1+Delta”, “Rate-Control: yes”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client waits while replay streaming is played and calculates play duration D1.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1+Delta”, “Rate-Control: no”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client waits while replay streaming is played and calculates play duration D2.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept Rate-Control header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header for video stream with rate control (RTP sequence number not in the order of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header for video stream without rate control (RTP sequence number not in the order of delivery, timestamps correspond to original sampling times of recorded frames considering inaccuracy).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>
            <!--REPLAY-3-1-13-->
            <section xml:id="tc.REPLAY-3-1-13">
                <title>
                    PLAYBACK VIDEO STREAMING – IMMEDIATE HEADER
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-13
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Immediate header field
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To compare RTSP playback with Immediate header.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem> 
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clockT1 -”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock [T1+delta]-”, “Immediate: yes”</emphasis>) control request to initiate the second video streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancelling existing first PLAY command and immediately start playing from the <emphasis role="bold">T1+delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation. ONVIF Client verifies that first packet sent from the new location have the D (discontinuity) bit set in its RTP extension header.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept an Immediate header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header for video stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not cancel the first PLAY command after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not immediately start playing from the new location after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header from the new location (first packet did not have the D (discontinuity) bit set in its RTP extension header).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>
            <!--REPLAY-3-1-15-->
            <section xml:id="tc.REPLAY-3-1-15">
                <title>
                    PLAYBACK VIDEO STREAMING – PAUSE WITHOUT RANGE
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-15
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback, Pause.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify pause without Range of replay video streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para> 
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session with transport parameter as <emphasis role="bold">„RTP/UDP‟</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT transfers video streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PAUSE</emphasis> (<emphasis role="bold">no Range header</emphasis>) control request to pause the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends 200 OK Response.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-1-15.20" xreflabel="20">
                            <para>
                                ONVIF Client verifies “CSeq” header field and optional “Date” header field if it is present in the PAUSE response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT pauses transferring of video streams and DUT sets the pause point to the current normal play time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after this.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will wait 2s after pause of replay streaming and will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, no Range</emphasis>) control request to resume the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT resumes video streams over RTP/UDP from the pause point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    The DUT passed all assertions.
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PAUSE and PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send mandatory header or field in the PAUSE response message (“CSeq”).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept a Range header with a value of clock for PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not pause streaming after PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not resume streaming after PAUSE request from pause point.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> On the step <xref linkend="tc.REPLAY-3-1-15.20"/> (verification that no packets were sent out with a timestamp later than the Date-field): If Date-field is not supplied, the ONVIF Client will follow to the following logic:
                </para> 
                <para>
                    If after receiving reply to the "PAUSE" command the ONVIF Client do not receive any RTP packet during 3 sec then stepis considered as passed. Otherwice, the ONVIF Client will check that DUT do not send RTP packets within 3 sec after the last packet, which had been received in the first 3 sec timespan.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>
            <!--REPLAY-3-1-16-->
            <section xml:id="tc.REPLAY-3-1-16">
                <title>
                    PLAYBACK VIDEO STREAMING – PAUSE WITH RANGE
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-16
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback, Pause.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify pause with Range of replay video streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT transfers video streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PAUSE</emphasis> (<emphasis role="bold">“Range: clock = T1 + delta”</emphasis>) control request to pause the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends 200 OK Response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “CSeq” header field and optional “Date” header field if it is present in the PAUSE response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT pauses transferring of video streams after the specified time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after specified time <emphasis role="bold">T1 + delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will wait 2 s after pause of replay streaming and will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, no Range</emphasis>) control request to resume the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT resumes video streams over RTP/UDP from the pause point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PAUSE and PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send mandatory headers or fields in the PAUSE response message (“CSeq”, “Date”).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept a Range header with a value of clock for PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not pause streaming after PAUSE request at specified point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not resume streaming after PAUSE request from posed point.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for video track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for video track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>
            <!--REPLAY-3-1-17-->
            <section xml:id="tc.REPLAY-3-1-17">
                <title>
                    PLAYBACK VIDEO STREAMING – SEEK
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-1-17
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Immediate header field
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify Seek scenario for DUT video streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with video track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with video from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the video stream information.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-1-17.13" xreflabel="13">
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”, “Rate-Control: no”</emphasis>) control request to initiate the video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP video stream to ONVIF Client over RTSP control connection.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-1-17.16" xreflabel="16">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation. ONVIF Client compares NTP time of the first frames with start time of the recording considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = MiddleT1-”, “Rate-Control: no”, “Immediate: yes”, where MiddleT1 is the time point into the recording time range</emphasis>) control request to initiate the video streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1</emphasis>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-1-17.19" xreflabel="19">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1 considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [MiddleT1-delta]-”, “Rate-Control: no”, “Immediate: yes”</emphasis>) control request to initiate the video streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1-delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-1-17.22" xreflabel="22">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1-delta considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [MiddleT1+delta]-”, “Rate-Control: no”, “Immediate: yes”</emphasis>) control request to initiate the video streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1+delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for video stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1+delta considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of video streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PLAY and TEARDOWN requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during video streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept an Immediate header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header for video stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not cancel the first PLAY command after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not immediately start playing from the new location after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent the first frame after PLAY response with NTP time different from the requested range at step <xref linkend="tc.REPLAY-3-1-17.13"/> or step <xref linkend="tc.REPLAY-3-1-17.16"/> or step <xref linkend="tc.REPLAY-3-1-17.19"/> or step <xref linkend="tc.REPLAY-3-1-17.22"/>.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> The test tool will select MiddleT1, MiddleT1-delta and MiddleT1+delta values for PLAYS’s range from the first minute of the recording.
                </para> 
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>



        </section>			
        <!--Playback Control – Audio Streaming-->
        <section xml:id="tc.replay.AudioStreaming" xreflabel="Section 5.4">
            <title>Playback Control – Audio Streaming</title>
            <!--REPLAY-3-2-1-->
            <section xml:id="tc.REPLAY-3-2-1">
                <title>
                    PLAYBACK AUDIO STREAMING – MEDIA CONTROL
                </title>

                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-1
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify RTSP control messages of the DUT for replay audio streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP OPTIONS control request to get the RTSP methods supported by DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and list of supported RTSP methods.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the session description information in the SDP message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies tag with TrackReference in SDP message for each audio track.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “Transport”, “Session” and “timeout” header fields in the SETUP response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “Session”, “RTP-Info”, “seq”, “uri” and “rtptime” header fields in the PLAY response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT transfers audio streams over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                            DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory RTSP commands DESCRIBE SETUP, PLAY, TEARDOWN, and OPTIONS in OPTIONS response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends SDP message with one or more audio track without the TrackReference in corresponding format (a:x-onvif-track:&lt;TrackReference&gt;).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send correct audio stream information in the SDP message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP OPTIONS, DESCRIBE, SETUP and PLAY</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory headers or fields in the SETUP response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory headers or fields in the PLAY response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header including replay header extension for audio stream.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for audio track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for audio track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-2-2-->
            <section xml:id="tc.REPLAY-3-2-2">
                <title>
                    PLAYBACK AUDIO STREAMING – RTP-Unicast/UDP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-2
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback audio streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the audio stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP audio stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of audio streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header and RTP header extension for audio stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for audio track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for audio track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-2-3-->
            <section xml:id="tc.REPLAY-3-2-3">
                <title>
                    PLAYBACK AUDIO STREAMING – RTP-Unicast/RTSP/HTTP/TCP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-3
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/HTTP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback audio streaming based on HTTP Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the audio stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP audio stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of audio streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header and RTP header extension for audio stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for audio track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for audio track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-2-4-->
            <section xml:id="tc.REPLAY-3-2-4">
                <title>
                    PLAYBACK AUDIO STREAMING – RTP/RTSP/TCP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-4
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback audio streaming based on RTP/RTSP/TCP using RTSP tunnel.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “RTSP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the audio stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP audio stream to ONVIF Client over TCP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of audio streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header and RTP header extension for audio stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for audio track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for audio track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-2-10-->
            <section xml:id="tc.REPLAY-3-2-10">
                <title>
                    PLAYBACK AUDIO STREAMING – PLAY WITH RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-10
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify stop of replay audio streaming based on RTP/UDP Unicast Transport after the specified time Range was reached.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1 + delta”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers audio streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT stops transferring of audio stream after the specified time <emphasis role="bold">T1 + delta</emphasis> was reached.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after specified time <emphasis role="bold">[T1 + delta]</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP OPTIONS, DESCRIBE, SETUP and PLAY</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not stop audio streaming after specified time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header in audio stream (RTP sequence number not in the orders of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for audio track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for audio track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-2-11-->
            <section xml:id="tc.REPLAY-3-2-11">
                <title>
                    PLAYBACK AUDIO STREAMING – RATECONTROL
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-11
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Rate-Control header field.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify applying of Rate-Control value for playback audio streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/AVP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the audio stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1+Delta”, “Rate-Control: yes”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP audio stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client waits while replay streaming is played and calculates play duration <emphasis role="bold">D1</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1+Delta”, “Rate-Control: no”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP audio stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client waits while replay streaming is played and calculates play duration <emphasis role="bold">D2</emphasis>.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept Rate-Control header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header for audio stream with rate control (RTP sequence numbers are not in the order of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header for audio stream without rate control (RTP sequence numbers are not in the order of delivery, timestamps correspond to original sampling times of recorded frames considering inaccuracy).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-2-12-->
            <section xml:id="tc.REPLAY-3-2-12">
                <title>
                    PLAYBACK AUDIO STREAMING – IMMEDIATE HEADER
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-12
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Immediate header field
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To compare RTSP playback with Immediate header.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the audio stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clockT1 -”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP audio stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock [T1+delta]-”, “Immediate: yes”</emphasis>) control request to initiate the second audio streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT cancelling existing first PLAY command and immediately start playing from the <emphasis role="bold">T1+delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation. ONVIF Client verifies that first packet sent from the new location have the D (discontinuity) bit set in its RTP extension header.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of audio streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept an Immediate header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header for audio stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not cancel the first PLAY command after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not immediately start playing from the new location after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header from the new location (first packet did not have the D (discontinuity) bit set in its RTP extension header).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-2-14-->
            <section xml:id="tc.REPLAY-3-2-14">
                <title>
                    PLAYBACK AUDIO STREAMING – PAUSE WITHOUT RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-14
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback, Pause.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify pause without Range of replay audio streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para> 
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session with transport parameter as <emphasis role="bold">„RTP/UDP‟</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT transfers audio streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PAUSE</emphasis> (<emphasis role="bold">no Range header</emphasis>) control request to pause the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends 200 OK Response.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-2-14.20" xreflabel="20">
                            <para>
                                ONVIF Client verifies “CSeq” header field and optional “Date” header field if it is present in the PAUSE response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT pauses transferring of audio streams and DUT sets the pause point to the current normal play time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after this.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will wait 2s after pause of replay streaming and will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, no Range</emphasis>) control request to resume the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT resumes audio streams over RTP/UDP from the pause point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PAUSE and PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory header or field in the PAUSE response message (“CSeq”).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept a Range header with a value of clock for PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not pause streaming after PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not resume streaming after PAUSE request from pause point.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for audio track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for audio track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> On the step            
                    <xref linkend="tc.REPLAY-3-2-14.20"/> (verification that no packets were sent out with a timestamp later than the Date-field): If Date-field is not supplied, the ONVIF Client will follow to the following logic:
                </para>
                <para>
                    If after receiving reply to the "PAUSE" command the ONVIF Client do not receive any RTP packet during 3 sec then stepis considered as passed. Otherwice, the ONVIF Client will check that DUT do not send RTP packets within 3 sec after the last packet, which had been received in the first 3 sec timespan.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>


            </section>

            <!--REPLAY-3-2-15-->
            <section xml:id="tc.REPLAY-3-2-15">
                <title>
                    PLAYBACK AUDIO STREAMING – PAUSE WITH RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-15
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback, Pause.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify pause with Range of replay audio streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers audio streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PAUSE</emphasis> (<emphasis role="bold">“Range: clock = T1 + delta”</emphasis>) control request to pause the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends 200 OK Response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “CSeq” header field and optional “Date” header field if it is present in the PAUSE response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT pauses transferring of audio streams after the specified time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after specified time <emphasis role="bold">T1 + delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will wait 2 s after pause of replay streaming and will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, no Range</emphasis>) control request to resume the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT resumes audio streams over RTP/UDP from the pause point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis> 
                    <itemizedlist> 
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PAUSE and PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory header or field in the PAUSE response message (“CSeq”).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept a Range header with a value of clock for PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not pause streaming after PAUSE request at specified point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not resume streaming after PAUSE request from posed point.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for audio track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for audio track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>


            </section>

            <!--REPLAY-3-2-16-->
            <section xml:id="tc.REPLAY-3-2-16">
                <title>
                    PLAYBACK AUDIO STREAMING – SEEK
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-2-16
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Immediate header field
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify Seek scenario for DUT audio streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with audio track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with audio from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the audio stream information.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-2-16.13" xreflabel="13">
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”, “Rate-Control: no”</emphasis>) control request to initiate the audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP audio stream to ONVIF Client over RTSP control connection.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-2-16.16" xreflabel="16">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation. ONVIF Client compares NTP time of the first frames with start time of the recording considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = MiddleT1-”, “Rate-Control: no”, “Immediate: yes”, where MiddleT1 is the time point into the recording time range</emphasis>) control request to initiate the audio streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1</emphasis>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-2-16.19" xreflabel="19">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1 considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [MiddleT1 - delta]-”, “Rate-Control: no”, “Immediate: yes”</emphasis>) control request to initiate the audio streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1-delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-2-16.22" xreflabel="22">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1-delta considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [MiddleT1 + delta]-”, “Rate-Control: no”, “Immediate: yes”</emphasis>) control request to initiate the audio streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1 + delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for audio stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1+delta considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of audio streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>
                    <itemizedlist>  
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PLAY and TEARDOWN requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during audio streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept an Immediate header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid RTP header for audio stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not cancel the first PLAY command after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent the first frame after PLAY response with NTP time different from the requested range at step <xref linkend="tc.REPLAY-3-2-16.13"/> or step <xref linkend="tc.REPLAY-3-2-16.16"/> or step <xref linkend="tc.REPLAY-3-2-16.19"/> or step <xref linkend="tc.REPLAY-3-2-16.22"/>.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> The test tool will select MiddleT1, MiddleT1-delta and MiddleT1+delta values for PLAYS’s range from the first minute of the recording.
                </para> 
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

        </section>	

        <!--Playback Control – Metadata Streaming-->
        <section xml:id="tc.replay.MetadataStreaming" xreflabel="Section 5.5">
            <title>Playback Control – Metadata Streaming</title>


            <!--REPLAY-3-3-1-->
            <section xml:id="tc.REPLAY-3-3-1">
                <title>
                    PLAYBACK METADATA STREAMING – MEDIA CONTROL
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-1
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify RTSP control messages of the DUT for replay metadata streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para> 
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP OPTIONS control request to get the RTSP methods supported by DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and list of supported RTSP methods.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the session description information in the SDP message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies tag with TrackReference in SDP message for each metadata track.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “Transport”, “Session” and “timeout” header fields in the SETUP response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “Session”, “RTP-Info”, “seq”, “uri” and “rtptime” header fields in the PLAY response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT transfers metadata streams over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory RTSP commands DESCRIBE SETUP, PLAY, TEARDOWN, and OPTIONS in OPTIONS response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends SDP message with one or more metadata track without the TrackReference in corresponding format (a:x-onvif-track:&lt;TrackReference&gt;).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send correct metadata stream information in the SDP message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP OPTIONS, DESCRIBE, SETUP and PLAY</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory headers or fields in the SETUP response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory headers or fields in the PLAY response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header including replay header extension for metadata stream.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-2-->
            <section xml:id="tc.REPLAY-3-3-2">
                <title>
                    PLAYBACK METADATA STREAMING – RTP-Unicast/UDP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-2
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback metadata streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of metadata streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header and RTP header extension for metadata stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                        
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-3-->
            <section xml:id="tc.REPLAY-3-3-3">
                <title>
                    PLAYBACK METADATA STREAMING – RTP-Unicast/RTSP/HTTP/TCP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-3
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/HTTP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback metadata streaming based on HTTP Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of metadata streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header and RTP header extension for metadata stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-4-->
            <section xml:id="tc.REPLAY-3-3-4">
                <title>
                    PLAYBACK METADATA STREAMING – RTP/RTSP/TCP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-4
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback metadata streaming based on RTP/RTSP/TCP using RTSP tunnel.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “RTSP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over TCP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of metadata streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header and RTP header extension for metadata stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-5-->
            <section xml:id="tc.REPLAY-3-3-5">
                <title>
                    REVERSE PLAYBACK METADATA STREAMING – RTP-Unicast/UDP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-5
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify reverse playback metadata streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T2-”, “Scale: -1.0”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies Packet Transmission Order (GOPs are sent in reverse order, but packets within a GOP are sent in forward order).
                            </para>
                        </listitem> 
                        <listitem>
                            <para>
                                ONVIF Client validates the RTP sequence numbers. Verify that the RTP sequence numbers of packets are increment monotonically in the order of delivery, not in the intended order of playback. 
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks Timestamps (the RTP timestamps shell indicate times at which each frame should be rendered at the client). 
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of metadata streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header and RTP header extension for metadata stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent GOPs or packets within a GOP in wrong order.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent RTP packets with invalid sequence number.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent RTP packets with invalid timestamp.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-6-->
            <section xml:id="tc.REPLAY-3-3-6">
                <title>
                    REVERSE PLAYBACK METADATA STREAMING – RTP-Unicast/RTSP/HTTP/TCP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-6
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/HTTP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify reverse playback metadata streaming based on HTTP Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T2-”, “Scale: -1.0”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies Packet Transmission Order (GOPs are sent in reverse order, but packets within a GOP are sent in forward order). 
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the RTP sequence numbers. Verify that the RTP sequence numbers of packets are increment monotonically in the order of delivery, not in the intended order of playback. 
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks Timestamps (the RTP timestamps shell indicate times at which each frame should be rendered at the client). 
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of metadata streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not sandal valid RTP header and RTP header extension for metadata stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent GOPs or packets within a GOP in wrong order.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent RTP packets with invalid sequence number.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent RTP packets with invalid timestamp.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-7-->
            <section xml:id="tc.REPLAY-3-3-7">
                <title>
                    REVERSE PLAYBACK METADATA STREAMING – RTP/RTSP/TCP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-7
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify reverse playback metadata streaming based on RTP/RTSP/TCP using RTSP tunnel.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “RTSP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in sdp - SDP information
                                        </para>
                                    </listitem> 
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T2-”, “Scale: -1.0”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over TCP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies Packet Transmission Order (GOPs are sent in reverse order, but packets within a GOP are sent in forward order). 
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the RTP sequence numbers. Verify that the RTP sequence numbers of packets are increment monotonically in the order of delivery, not in the intended order of playback. 
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks Timestamps (the RTP timestamps shell indicate times at which each frame should be rendered at the client). 
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of metadata streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send s valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send s valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent GOPs or packets within a GOP in wrong order.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent RTP packets with invalid sequence number.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent RTP packets with invalid timestamp.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send s valid RTP header and RTP header extension for metadata stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT
                </para>.
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-10-->
            <section xml:id="tc.REPLAY-3-3-10">
                <title>
                    PLAYBACK METADATA STREAMING – PLAY WITH RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-10
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify stop of replay metadata streaming based on RTP/UDP Unicast Transport after the specified time Range was reached.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in sdp - SDP information
                                        </para>
                                    </listitem> 
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1 + delta”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers metadata streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT stops transferring of metadata stream after the specified time <emphasis role="bold">T1 + delta</emphasis> was reached.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after specified time <emphasis role="bold">[T1 + delta]</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP OPTIONS, DESCRIBE, SETUP and PLAY</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not stop metadata streaming after specified time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header in metadata stream (RTP sequence number not in the orders of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-11-->
            <section xml:id="tc.REPLAY-3-3-11">
                <title>
                    PLAYBACK METADATA STREAMING – RATECONTROL
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-11
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Rate-Control header field.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify applying of Rate-Control value for playback metadata streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in responseHeader - header of response to DESCRIBE
                                        </para>
                                    </listitem> 
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/AVP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1+Delta”, “Rate-Control: yes”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client waits while replay streaming is played and calculates play duration <emphasis role="bold">D1</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1+Delta”, “Rate-Control: no”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client waits while replay streaming is played and calculates play duration <emphasis role="bold">D2</emphasis>.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept Rate-Control header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header for metadata stream with rate control (RTP sequence numbers are not in the order of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header for metadata stream without rate control (RTP sequence numbers are not in the order of delivery, timestamps correspond to original sampling times of recorded frames considering inaccuracy).
                            </para>
                        </listitem>
                        
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-12-->
            <section xml:id="tc.REPLAY-3-3-12">
                <title>
                    PLAYBACK METADATA STREAMING – IMMEDIATE HEADER
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-12
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Immediate header field
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To compare RTSP playback with Immediate header.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clockT1 -”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock [T1+delta]-”, “Immediate: yes”</emphasis>) control request to initiate the second metadata streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT cancelling existing first PLAY command and immediately start playing from the <emphasis role="bold">T1+delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation. ONVIF Client verifies that first packet sent from the new location have the D (discontinuity) bit set in its RTP extension header.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of metadata streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept an Immediate header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header for metadata stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not cancel the first PLAY command after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not immediately start playing from the new location after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header from the new location (first packet did not have the D (discontinuity) bit set in its RTP extension header).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-14-->
            <section xml:id="tc.REPLAY-3-3-14">
                <title>
                    PLAYBACK METADATA STREAMING – PAUSE WITHOUT RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-14
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback, Pause.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify pause without Range of replay metadata streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session with transport parameter as <emphasis role="bold">„RTP/UDP‟</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers metadata streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PAUSE</emphasis> (<emphasis role="bold">no Range header</emphasis>) control request to pause the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends 200 OK Response.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-3-14.20" xreflabel="20">
                            <para>
                                ONVIF Client verifies “CSeq” header field and optional “Date” header field if it is present in the PAUSE response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT pauses transferring of metadata streams and DUT sets the pause point to the current normal play time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after this.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will wait 2s after pause of replay streaming and will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, no Range</emphasis>) control request to resume the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT resumes metadata streams over RTP/UDP from the pause point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PAUSE and PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory header or field in the PAUSE response message (“CSeq”).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept a Range header with a value of clock for PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not pause streaming after PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not resume streaming after PAUSE request from pause point.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> On the step <xref linkend="tc.REPLAY-3-3-14.20"/> (verification that no packets were sent out with a timestamp later than the Date-field): If Date-field is not supplied, the ONVIF Client will follow to the following logic:
                </para>
                <para>
                    If after receiving reply to the "PAUSE" command the ONVIF Client do not receive any RTP packet during 3 sec then stepis considered as passed. Otherwice, the ONVIF Client will check that DUT do not send RTP packets within 3 sec after the last packet, which had been received in the first 3 sec timespan.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-15-->
            <section xml:id="tc.REPLAY-3-3-15">
                <title>
                    PLAYBACK METADATA STREAMING – PAUSE WITH RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-15
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback, Pause.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify pause with Range of replay metadata streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers metadata streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PAUSE</emphasis> (<emphasis role="bold">“Range: clock = T1 + delta”</emphasis>) control request to pause the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends 200 OK Response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “CSeq” header field and optional “Date” header field if it is present in the PAUSE response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT pauses transferring of metadata streams after the specified time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after specified time <emphasis role="bold">T1 + delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will wait 2 s after pause of replay streaming and will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, no Range</emphasis>) control request to resume the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT resumes metadata streams over RTP/UDP from the pause point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <itemizedlist>
                        <listitem>
                            <para>
                                <emphasis role="bold">PASS –</emphasis>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PAUSE and PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory header or field in the PAUSE response message (“CSeq”).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept a Range header with a value of clock for PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not pause streaming after PAUSE request at specified point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not resume streaming after PAUSE request from posed point.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for metadata track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> If RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for metadata track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-3-16-->
            <section xml:id="tc.REPLAY-3-3-16">
                <title>
                    PLAYBACK METADATA STREAMING – SEEK
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-3-16
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Immediate header field
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify Seek scenario for DUT metadata streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with metadata from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the metadata stream information.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-3-16.13" xreflabel="13">
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”, “Rate-Control: no”</emphasis>) control request to initiate the metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP metadata stream to ONVIF Client over RTSP control connection.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-3-16.16" xreflabel="16">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation. ONVIF Client checks that NTP time of the first frames are within [T1, T2] interval.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = MiddleT1-”, “Rate-Control: no”, “Immediate: yes”, where MiddleT1 is the time point into the recording time range</emphasis>) control request to initiate the metadata streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1</emphasis>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-3-16.19" xreflabel="19">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation. ONVIF Client checks that NTP time of the first frames are within [MiddleT1, T2] interval.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [MiddleT1 - delta]-”, “Rate-Control: no”, “Immediate: yes”</emphasis>)) control request to initiate the metadata streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1-delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-3-16.22" xreflabel="22">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation. ONVIF Client checks that NTP time of the first frames are within [MiddleT1-delta, T2] interval.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [MiddleT1+delta]-”, “Rate-Control: no”, “Immediate: yes”</emphasis>) control request to initiate the metadata streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1+delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for metadata stream and renders it after the validation. ONVIF Client checks that NTP time of the first frames are within [MiddleT1+delta, T2] interval.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of metadata streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PLAY and TEARDOWN requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept an Immediate header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send a valid RTP header for metadata stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not cancel the first PLAY command after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not immediately start playing from the new location after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent the first frame after PLAY response with NTP time value not within requested interval at step <xref linkend="tc.REPLAY-3-3-16.13"/> or step <xref linkend="tc.REPLAY-3-3-16.16"/> or step <xref linkend="tc.REPLAY-3-3-16.19"/> or step <xref linkend="tc.REPLAY-3-3-16.22"/>.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> The test tool will select MiddleT1, MiddleT1-delta and MiddleT1+delta values for PLAYS’s range from the first minute of the recording.
                </para> 
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

        </section>	

        <!--Playback Control – Video, Audio and Metadata Streaming-->
        <section xml:id="tc.replay.VideoAudioMetadataStreaming" xreflabel="Section 5.6">
            <title>Playback Control – Video, Audio and Metadata Streaming</title>

            <!--REPLAY-3-4-1-->
            <section xml:id="tc.REPLAY-3-4-1">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – MEDIA CONTROL
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-1
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify RTSP control messages of the DUT for replay Video, Audio and Metadata streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP OPTIONS control request to get the RTSP methods supported by DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and list of supported RTSP methods.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates the session description information in the SDP message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies tag with TrackReference in SDP message for each Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “Transport”, “Session” and “timeout” header fields in the SETUP response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “Session”, “RTP-Info”, “seq”, “uri” and “rtptime” header fields in the PLAY response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers Video, Audio (if Audio Recording supported), and Metadata (if Metadata Recording is supported) streams over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory RTSP commands DESCRIBE SETUP, PLAY, TEARDOWN, and OPTIONS in OPTIONS response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends SDP message with one or more Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track without the TrackReference in corresponding format (a:x-onvif-track:&lt;TrackReference&gt;).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send correct Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream information in the SDP message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP OPTIONS, DESCRIBE, SETUP and PLAY</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory headers or fields in the SETUP response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory headers or fields in the PLAY response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header including replay header extension for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then minimum value of Track.DataFrom for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then maximum value of Track.DataTo for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-4-2-->
            <section xml:id="tc.REPLAY-3-4-2">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – RTP-Unicast/UDP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-2
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP data transfer via UDP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback Video, Audio and Metadata streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts Video (if is supported), Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header and RTP header extension for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then minimum value of Track.DataFrom for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then maximum value of Track.DataTo for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-4-3-->
            <section xml:id="tc.REPLAY-3-4-3">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – RTP-Unicast/RTSP/HTTP/TCP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-3
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/HTTP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback Video, Audio and Metadata streaming based on HTTP Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the Video, Audio and Metadata streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send s valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send s valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send s valid RTP header and RTP header extension for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then minimum value of Track.DataFrom for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then maximum value of Track.DataTo for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-4-4-->
            <section xml:id="tc.REPLAY-3-4-4">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – RTP/RTSP/TCP
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-4
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> RTP/RTSP/TCP, RTP, RTCP, Stream control, RTSP, Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify playback Video, Audio and Metadata streaming based on RTP/RTSP/TCP using RTSP tunnel.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport.Protocol = “RTSP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> (<emphasis role="bold">“Require: onvif-replay”</emphasis>) request with transport parameter as <emphasis role="bold">RTP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream to ONVIF Client over TCP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client validates RTCP packets if The DUT sends theirs.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header and RTP header extension for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT sent an incorrect RTCP report.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then minimum value of Track.DataFrom for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T1
                </para>.
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then maximum value of Track.DataTo for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RTCP report will be validated only if it is received from the DUT.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>

            <!--REPLAY-3-4-10-->
            <section xml:id="tc.REPLAY-3-4-10">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – PLAY WITH RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-10
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify stop of replay Video, Audio and Metadata streaming based on RTP/UDP Unicast Transport after the specified time Range was reached.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1 + delta”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT stops transferring of Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream after the specified time <emphasis role="bold">T1 + delta</emphasis> was reached.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after the specified time [T1 + delta].
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP OPTIONS, DESCRIBE, SETUP and PLAY</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not stop Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming after the specified time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header in Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream (RTP sequence number not in the orders of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then minimum value of Track.DataFrom for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then maximum value of Track.DataTo for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-4-11-->
            <section xml:id="tc.REPLAY-3-4-11">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – RATECONTROL
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-11
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Rate-Control header field.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify applying of Rate-Control value for playback Video, Audio and Metadata streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “HTTP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/AVP/TCP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1+Delta”, “Rate-Control: yes”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client waits while replay streaming is played and calculates play duration <emphasis role="bold">D1</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-T1+Delta”, “Rate-Control: no”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream to ONVIF Client over HTTP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client waits while replay streaming is played and calculates play duration <emphasis role="bold">D2</emphasis>.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session is terminated by the DUT during Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept Rate-Control header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid RTP header for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream with rate control (RTP sequence number not in the order of delivery, timestamps correspond to playback timing considering inaccuracy).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream without rate control (RTP sequence number not in the order of delivery, timestamps correspond to original sampling times of recorded frames considering inaccuracy).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-4-12-->
            <section xml:id="tc.REPLAY-3-4-12">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – IMMEDIATE HEADER
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-12
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Immediate header field
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To compare RTSP playback with Immediate header.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clockT1 -”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream to ONVIF Client over UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock [T1 + delta]-”, “Immediate: yes”</emphasis>) control request to initiate the second Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT cancelling existing first PLAY command and immediately start playing from the <emphasis role="bold">T1+delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation. ONVIF Client verifies that first packet sent from the new location have the D (discontinuity) bit set in its RTP extension header.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for <emphasis role="bold">RTSP DESCRIBE, SETUP, PLAY and TERDOWN</emphasis> requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept an Immediate header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send s valid RTP header for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not cancel the first PLAY command after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not immediately start playing from the new location after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send valid RTP header from the new location (first packet did not have the D (discontinuity) bit set in its RTP extension header).
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-4-14-->
            <section xml:id="tc.REPLAY-3-4-14">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – PAUSE WITHOUT RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-14
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback, Pause.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify pause without Range of replay Video, Audio and Metadata streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session with transport parameter as <emphasis role="bold">„RTP/UDP‟</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) stream and renders it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PAUSE</emphasis> (<emphasis role="bold">no Range header</emphasis>) control request to pause the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends 200 OK Response.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-4-14.20" xreflabel="20">
                            <para>
                                ONVIF Client verifies “CSeq” header field and optional “Date” header field if it is present in the PAUSE response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT pauses transferring of Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streams and DUT sets the pause point to the current normal play time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after this.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will wait 2s after pause of replay streaming and will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, no Range</emphasis>) control request to resume the Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT resumes Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) streams over RTP/UDP from the pause point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PAUSE and PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory header or field in the PAUSE response message (“CSeq”).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept a Range header with a value of clock for PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not pause streaming after PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not resume streaming after PAUSE request from pause point.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then minimum value of Track.DataFrom for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then maximum value of Track.DataTo for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> On the step <xref linkend="tc.REPLAY-3-4-14.20"/> (verification that no packets were sent out with a timestamp later than the Date-field): If Date-field is not supplied, the ONVIF Client will follow to the following logic:
                </para>
                <para>
                    If after receiving reply to the "PAUSE" command the ONVIF Client do not receive any RTP packet during 3 sec then stepis considered as passed. Otherwice, the ONVIF Client will check that DUT do not send RTP packets within 3 sec after the last packet, which had been received in the first 3 sec timespan.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-4-15-->
            <section xml:id="tc.REPLAY-3-4-15">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – PAUSE WITH RANGE
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-15
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Playback, Pause.
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify pause with Range of replay Video, Audio and Metadata streaming based on RTP/UDP Unicast Transport.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with both video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) track with data exists for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetReplayUriResponse</emphasis> from the DUT
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> control request to retrieve the media description information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and SDP message (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP SETUP</emphasis> control request with “onvif-replay” feature tag (<emphasis role="bold">“Require: onvif-replay”</emphasis>) to create a RTSP Session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and Stream Information details.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT transfers Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streams over RTP/UDP.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PAUSE</emphasis> (<emphasis role="bold">“Range: clock = T1 + delta”</emphasis>) control request to pause the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends 200 OK Response.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies “CSeq” header field and optional “Date” header field if it is present in the PAUSE response message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT pauses transferring of Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streams after the specified time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies that there are no RTP received after specified time <emphasis role="bold">T1 + delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will wait 2 s after pause of replay streaming and will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, no Range</emphasis>) control request to resume the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and RTP protocol information.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT resumes Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streams over RTP/UDP from the pause point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request to terminate the RTSP session at the end of the streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis> 
                </para>
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send a valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PAUSE and PLAY requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send mandatory header or field in the PAUSE response message (“CSeq”).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not accept a Range header with a value of clock for PAUSE request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not pause streaming after PAUSE request at specified point.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not resume streaming after PAUSE request from posed point.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.EarliestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataFrom for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T1.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> RecordingInformation.LatestRecording is not included in <emphasis role="bold">GetRecordingInformationResponse</emphasis> message, then value of Track.DataTo for Video, Audio (if Audio Recording is supported), and Metadata (if Metadata Recording is supported) track will be used as T2.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> See <xref linkend="Annex_InvalidRTPheaderextension"/> for Invalid RTP header definition.
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>

            </section>

            <!--REPLAY-3-4-16-->
            <section xml:id="tc.REPLAY-3-4-16">
                <title>
                    PLAYBACK VIDEO, AUDIO AND METADATA STREAMING – SEEK
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-3-4-16
                </para>
                <para>
                    <emphasis role="bold">Specification Coverage:</emphasis> Immediate header field
                </para>
                <para>
                    <emphasis role="bold">Feature Under Test:</emphasis> None
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To verify Seek scenario for DUT Video, Audio and Metadata streaming.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Recording with all three: video, audio (if Audio Recording is supported), and metadata (if Metadata Recording is supported) tracks with data exist for a DUT (see <xref linkend="Annex_RecordingEnvironmentPre-Requisite"/>).
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis> 
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Get token <emphasis role="bold">Token1</emphasis> of recording which contains at least one track with Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) from the DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetRecordingInformationRequest</emphasis> message (<emphasis role="bold">RecordingToken = “Token1”</emphasis>) to retrieve information about Recording.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Verify the <emphasis role="bold">GetRecordingInformationResponse</emphasis> message (<emphasis role="bold">RecordingInformation.RecordingToken = Token1, RecordingInformation.EarliestRecording = T1, RecordingInformation.LatestRecording = T2</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">GetReplayUriRequest</emphasis> message (<emphasis role="bold">RecordingToken = Token1, Stream = “RTP-Unicast”, Transport. Protocol = “UDP”</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP DESCRIBE</emphasis> request.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and SDP information (<emphasis role="italic">sdp</emphasis>).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Set <emphasis role="italic">responseHeader</emphasis> := header of response to <emphasis role="bold">DESCRIBE</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client checks types of IP addresses returned in response to <emphasis role="bold">DESCRIBE</emphasis> by following the procedure mentioned in <xref linkend="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"/> with the following input parameters 
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">responseHeader</emphasis> - header of response to <emphasis role="bold">DESCRIBE</emphasis> 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in <emphasis role="italic">sdp</emphasis> - SDP information 
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            in IPv4 – IP type
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke RTSP SETUP request (<emphasis role="bold">“Require: onvif-replay”</emphasis>) with transport parameter as <emphasis role="bold">RTP/UDP</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream information.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-4-16.13" xreflabel="13">
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = T1-”, “Rate-Control: no”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK message</emphasis> and starts Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends RTP Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream to ONVIF Client over RTSP control connection.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-4-16.16" xreflabel="16">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation. ONVIF Client compares NTP time of the first frames with start time of the recording considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = MiddleT1-”, “Rate-Control: no”, “Immediate: yes”, where MiddleT1 is the time point into the recording time range</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1</emphasis>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-4-16.19" xreflabel="19">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1 considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [MiddleT1 – delta]-”, “Rate-Control: no”, “Immediate: yes”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1-delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-3-4-16.22" xreflabel="22">
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1-delta considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP PLAY</emphasis> (<emphasis role="bold">“Require: onvif-replay”, “Range: clock = [MiddleT1 + delta]-”, “Rate-Control: no”, “Immediate: yes”</emphasis>) control request to initiate the Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming from other time.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT cancels previous PLAY command and immediately start playing from the <emphasis role="bold">MiddleT1+delta</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client verifies RTP header and RTP header extensions for Video, Audio (if Audio Recording sis unsupported), and Metadata (if Audio Recording is supported) stream and render it after the validation. ONVIF Client compares NTP time of the first frame with MiddleT1+delta considering inaccuracy (inaccuracy value=2 s).
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client will invoke <emphasis role="bold">RTSP TEARDOWN</emphasis> control request at the end of Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming to terminate the RTSP session.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sends <emphasis role="bold">200 OK Response</emphasis> and terminates the RTSP Session.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send valid <emphasis role="bold">GetRecordingInformationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayUriResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid <emphasis role="bold">GetReplayUriResponse</emphasis> message with valid RTSP URI.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                DUT did not send <emphasis role="bold">RTSP 200 OK Response</emphasis> for RTSP DESCRIBE, SETUP, PLAY and TEARDOWN requests.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                RTSP Session was terminated by the DUT during Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) streaming.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not accept an immediate header for PLAY command.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send valid RTP header for Video, Audio (if Audio Recording is supported), and Metadata (if Audio Recording is supported) stream.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not cancel the first PLAY command after PLAY command with “Immediate: yes”.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT sent the first frame after PLAY response with NTP time different from the requested range at step <xref linkend="tc.REPLAY-3-4-16.13"/> or step <xref linkend="tc.REPLAY-3-4-16.16"/> or step <xref linkend="tc.REPLAY-3-4-16.19"/> or step <xref linkend="tc.REPLAY-3-4-16.22"/>.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> The test tool will select MiddleT1, MiddleT1-delta and MiddleT1+delta values for PLAYS’s range from the first minute of the recording. 
                </para>
                <para>
                    <emphasis role="bold">NOTE:</emphasis> ONVIF Client checks authentication type for all RTSP requests by following the procedure mentioned in <xref linkend="Annex_RTSPAuthenticationCheck"/>.
                </para>
            </section>


        </section>	

        <!--Replay Configuration-->
        <section xml:id="tc.replay.ReplayConfiguration" xreflabel="Section 5.7">
            <title>Replay Configuration</title>


            <!--REPLAY-4-1-1-->
            <section xml:id="tc.REPLAY-4-1-1">
                <title>
                    REPLAY CONFIGURATION
                </title>
                <para>
                    <emphasis role="bold">Test Case ID:</emphasis> REPLAY-4-1-1
                </para>
                <para>
                    Specification Coverage: ReplayConfiguration
                </para>
                <para>
                    Feature under test: GetReplayConfiguration, SetReplayConfiguration
                </para>
                <para>
                    <emphasis role="bold">WSDL Reference:</emphasis> replay.wsdl
                </para>
                <para>
                    <emphasis role="bold">Test Purpose:</emphasis> To check GetReplayConfiguration and SetReplayConfiguration commands.
                </para>
                <para>
                    <emphasis role="bold">Pre-Requisite:</emphasis> Replay Service is received from the DUT. GetServices is supported by the DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Configuration:</emphasis> ONVIF Client and DUT.
                </para>
                <para>
                    <emphasis role="bold">Test Procedure:</emphasis>  
                </para>
                <para>
                    <orderedlist>
                        <?dbfo label-width="1.5em"?>

                        <listitem>
                            <para>
                                Start an ONVIF Client.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Start a DUT.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client gets the service capabilities (out <emphasis role="italic">cap</emphasis>) by following the procedure mentioned in <xref linkend="Annex_GetServiceCapabilities"/>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client invokes <emphasis role="bold">GetReplayConfiguration</emphasis> request message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT responds with <emphasis role="bold">GetReplayConfigurationResponse</emphasis> with parameters
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            Configuration =: <emphasis role="italic">initialConf</emphasis>
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                If <emphasis role="italic">cap</emphasis>.SessionTimeoutRange skipped set <emphasis role="italic">sessionTimeout</emphasis> := PT60S.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                If <emphasis role="italic">cap</emphasis>.SessionTimeoutRange is not skipped and <emphasis role="italic">initialConf</emphasis>.SessionTimeout is not equal to  the first value from <emphasis role="italic">cap</emphasis>.SessionTimeoutRange, set <emphasis role="italic">sessionTimeout</emphasis> to the first value from <emphasis role="italic">cap</emphasis>.SessionTimeoutRange. Otherwise set <emphasis role="italic">sessionTimeout</emphasis> to the last value from <emphasis role="italic">cap</emphasis>.SessionTimeoutRange list.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-4-1-1.8" xreflabel="8">
                            <para>
                                ONVIF Client invokes <emphasis role="bold">SetReplayConfiguration</emphasis> request message with parameters
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            Configuration.SessionTimeout := <emphasis role="italic">sessionTimeout</emphasis> value
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                ONVIF Client invokes <emphasis role="bold">GetReplayConfiguration</emphasis> request message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT responds with <emphasis role="bold">GetReplayConfigurationResponse</emphasis> with parameters
                                <itemizedlist>
                                    <listitem>
                                        <para>
                                            Configuration =: <emphasis role="italic">conf</emphasis>
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                If <emphasis role="italic">conf</emphasis>.SessionTimeout value is not equal to <emphasis role="italic">sessionTimeout</emphasis> value, FAIL the test and go to step <xref linkend="tc.REPLAY-4-1-1.12"/>.
                            </para>
                        </listitem>
                        <listitem xml:id="tc.REPLAY-4-1-1.12" xreflabel="12">
                            <para>
                                ONVIF Client restores replay configuration changed at step <xref linkend="tc.REPLAY-4-1-1.8"/>.
                            </para>
                        </listitem>
                    </orderedlist>

                </para>
                <para>
                    <emphasis role="bold">Test Result:</emphasis>
                </para> 
                <para>
                    <emphasis role="bold">PASS –</emphasis>
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT passed all assertions.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    <emphasis role="bold">FAIL –</emphasis>  
                    <itemizedlist>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">GetReplayConfigurationResponse</emphasis> message.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                The DUT did not send <emphasis role="bold">SetReplayConfigurationResponse</emphasis> message.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
            </section>



        </section>
    </chapter>
    <appendix>
        <title>Annex A Helper Procedures and Additional Notes</title>

        <!--A.1-->
        <section xml:id="Annex_InvalidRTPheaderextension"
                xreflabel="Annex A.1">
            <title>Invalid RTP header extension</title>

            <para>
                An RTP header extension which is not formed according to the header field format defined in the Streaming Specification document Section 6.2 is considered as invalid RTP header.
            </para>

            <para>
                RTP header will be assumed as invalid in the following cases:
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>
                            Sequence number is not in order of delivery.
                        </para>
                    </listitem>
                </orderedlist>
            </para>
            <para>
                RTP header with replay header extension will be assumed as invalid in the following cases:
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>
                            RTP header extension ID is not equal to 0xABAC.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            RTP header does not have one of the following fields: NTP timestamp, C, E, D, mbz, CSeq (e.g. RTP replay extension does not have proper length).
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            NTP timestamp is not monotonically increasing in case of normal playback or decreasing in case of reverse playback.
                        </para>
                    </listitem>
                </orderedlist>
            </para>

        </section>
        <!--A.2-->
        <section xml:id="Annex_RecordingEnvironmentPre-Requisite"
                xreflabel="Annex A.2">
            <title>Recording Environment Pre-Requisite</title>
            <para>
                The following pre-perquisite shall be filled before executing tests for Replay Service:
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>
                            At least one recording shall be present at the DUT and specified for test execution
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The recording shall be stopped before executing tests
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The recording shall contain at least one track each for video, audio (if Audio Recording is supported) and Metadata (if Metadata Recording is supported)
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The recording shall contain data at least in the video track, audio track (if Audio Recording is supported), and metadata track (if Metadata Recording is supported) and configuration of each track shall be consistent for the duration of the recording.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The recording contains at least one gap
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The recording span (including gap) should be not more than 3 minutes
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Each recording event shall be at least one minute for the recording
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            GOPs of recording should be renewed every 2 seconds.
                        </para>
                    </listitem>
                </orderedlist>
            </para>
        </section>
        <!--A.3-->
        <section xml:id="Annex_GetServiceCapabilities"
                xreflabel="Annex A.3">
            <title>Get Service Capabilities</title>
            <para>
                <emphasis role="bold">Name:</emphasis> HelperGetServiceCapabilities
            </para>
            <para>
                <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to get service capabilities.
            </para>
            <para>
                <emphasis role="bold">Pre-Requisite:</emphasis> Replay Service is received from the DUT.
            </para>
            <para>
                <emphasis role="bold">Input:</emphasis> None
            </para>
            <para>
                <emphasis role="bold">Returns:</emphasis> The service capabilities (<emphasis role="italic">cap</emphasis>).
            </para>
            <para>
                <emphasis role="bold">Procedure:</emphasis> 
            </para>
            <para>
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>
                            ONVIF Client invokes <emphasis role="bold">GetServiceCapabilities</emphasis>.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            The DUT responds with a <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message with parameters
                            <itemizedlist>
                                <listitem>
                                    <para>
                                        Capabilities =: <emphasis role="italic">cap</emphasis>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </para>
                    </listitem>
                </orderedlist>

            </para>
            <para>
                <emphasis role="bold">Procedure Result:</emphasis>
            </para>
            <para>
                <emphasis role="bold">PASS –</emphasis>
                <itemizedlist>
                    <listitem>
                        <para>
                            The DUT passed all assertions.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <emphasis role="bold">FAIL –</emphasis> 
                <itemizedlist>
                    <listitem>
                        <para>
                            The DUT did not send <emphasis role="bold">GetServiceCapabilitiesResponse</emphasis> message.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <!--A.4-->
        <section xml:id="Annex_RTSPAuthenticationCheck"
                xreflabel="Annex A.4">
            <title>RTSP Authentication Check</title>
            <para>
                <emphasis role="bold">Name:</emphasis> HelperRTSPAuthenticationCheck
            </para>
            <para>
                <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to check that DUT uses Digest authentication type for RTSP.
            </para>
            <para>
                <emphasis role="bold">Pre-Requisite:</emphasis> Real-time Streaming is supported by DUT.
            </para>
            <para>
                <emphasis role="bold">Input:</emphasis> None.
            </para>
            <para>
                <emphasis role="bold">Returns:</emphasis> None.
            </para>
            <para>
                <emphasis role="bold">Procedure:</emphasis>
            </para>
            <para>
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>
                            If DUT sends RTSP 401 Unauthorized message to any RTSP request:
                            <orderedlist numeration="arabic" inheritnum="inherit">
                                <?dbfo label-width="2.5em"?>
                                <listitem>
                                    <para>
                                        If RTSP 401 Unauthorized message does not have <emphasis role="bold">WWW-Authenticate: Digest</emphasis> header, FAIL the test and skip other steps.
                                    </para>
                                </listitem>
                            </orderedlist>
                        </para>
                    </listitem>
                </orderedlist>

            </para>
            <para>
                <emphasis role="bold">Procedure Result:</emphasis>
            </para>
            <para>
                <emphasis role="bold">PASS –</emphasis>
                <itemizedlist>
                    <listitem>
                        <para>
                            DUT passes all assertions.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <emphasis role="bold">FAIL –</emphasis> 
                <itemizedlist>
                    <listitem>
                        <para>
                            DUT did not send response message to RTSP request.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <!--A.5-->
        <section xml:id="Annex_CheckofIPaddresstypeinresponsetoRTSPDESCRIBE"
                xreflabel="Annex A.5">
            <title>Check of IP address type in response to RTSP DESCRIBE</title>
            <para>
                <emphasis role="bold">Name:</emphasis> HelperCheckIPType
            </para>
            <para>
                <emphasis role="bold">Procedure Purpose:</emphasis> Helper procedure to check IP addresses types returned by DUT in response to RTSP DESCRIBE.
            </para>
            <para>
                <emphasis role="bold">Pre-Requisite:</emphasis> None.
            </para>
            <para>
                <emphasis role="bold">Input:</emphasis> Header of response to DESCRIBE (<emphasis role="italic">responseHeader</emphasis>). SDP (<emphasis role="italic">sdp</emphasis>). IP type (<emphasis role="italic">ipType</emphasis>).
            </para>
            <para>
                <emphasis role="bold">Returns:</emphasis> None.
            </para>
            <para>
                <emphasis role="bold">Procedure:</emphasis>
            </para>
            <para>
                <orderedlist>
                    <?dbfo label-width="1.5em"?>
                    <listitem>
                        <para>
                            For each <emphasis role="bold">Content-Base</emphasis> field in <emphasis role="italic">responseHeader</emphasis> (<emphasis role="italic">contentBase</emphasis>) that has absolute IP value: 
                            <orderedlist numeration="arabic" inheritnum="inherit">
                                <?dbfo label-width="2.5em"?>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">contentBase</emphasis> IP value does not correspond to <emphasis role="italic">ipType</emphasis>, FAIL the test and skip other steps (see [RFC2326] for details).
                                    </para>
                                </listitem> 
                            </orderedlist>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            For each <emphasis role="bold">Content-Location</emphasis> field in responseHeader (<emphasis role="italic">contentLocation</emphasis>) that has absolute IP value: 
                            <orderedlist numeration="arabic" inheritnum="inherit">
                                <?dbfo label-width="2.5em"?>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">contentLocation</emphasis> IP value does not correspond to <emphasis role="italic">ipType</emphasis>, FAIL the test and skip other steps (see [RFC2326] for details). 
                                    </para>
                                </listitem>
                            </orderedlist>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            For each <emphasis role="bold">"a=control"</emphasis> attribute in sdp (<emphasis role="italic">aControl</emphasis>) that has absolute IP value: 
                            <orderedlist numeration="arabic" inheritnum="inherit">
                                <?dbfo label-width="2.5em"?>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">aControl</emphasis> IP value does not correspond to <emphasis role="italic">ipType</emphasis>, FAIL the test and skip other steps (see [RFC2326] for details). 
                                    </para>
                                </listitem>
                            </orderedlist>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            If <emphasis role="italic">ipType</emphasis> = IPv4: 
                            <orderedlist numeration="arabic" inheritnum="inherit">
                                <?dbfo label-width="2.5em"?>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">sdp</emphasis> contains at least one origin field ("o=") with <emphasis role="bold">addrtype</emphasis> != "IP4", FAIL the test and skip other steps (see [RFC4566] for details). 
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">sdp</emphasis> contains at least one origin field ("o=") with IP type of <emphasis role="bold">unicast-address</emphasis> sub-field != IPv4 type, FAIL the test and skip other steps (see [RFC4566] for details). 
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">sdp</emphasis> contains at least one connection data field ("c=") with <emphasis role="bold">addrtype</emphasis> != "IP4", FAIL the test and skip other steps (see [RFC4566] for details).
                                    </para>
                                </listitem> 
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">sdp</emphasis> contains at least one connection data field ("c=") with IP type of <emphasis role="bold">connection address</emphasis> sub-field != IPv4 type, FAIL the test and skip other steps (see [RFC4566] for details). 
                                    </para>
                                </listitem>
                            </orderedlist>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            If <emphasis role="italic">ipType</emphasis> = IPv6: 
                            <orderedlist numeration="arabic" inheritnum="inherit">
                                <?dbfo label-width="2.5em"?>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">sdp</emphasis> contains at least one origin field ("o=") with <emphasis role="bold">addrtype</emphasis> != "IP6", FAIL the test and skip other steps (see [RFC4566] for details). 
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">sdp</emphasis> contains at least one origin field ("o=") with IP type of <emphasis role="bold">unicast-address</emphasis> sub-field != IPv6 type, FAIL the test and skip other steps (see [RFC4566] for details). 
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">sdp</emphasis> contains at least one connection data field ("c=") with <emphasis role="bold">addrtype</emphasis> != "IP6", FAIL the test and skip other steps (see [RFC4566] for details). 
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        If <emphasis role="italic">sdp</emphasis> contains at least one connection data field ("c=") with IP type of <emphasis role="bold">connection address</emphasis> sub-field != IPv6 type, FAIL the test and skip other steps (see [RFC4566] for details).
                                    </para>
                                </listitem>
                            </orderedlist>
                        </para>
                    </listitem>
                </orderedlist>

            </para>
            <para>
                <emphasis role="bold">Procedure Result:</emphasis>
            </para>
            <para>
                <emphasis role="bold">PASS –</emphasis>
                <itemizedlist>
                    <listitem>
                        <para>
                            DUT passes all assertions.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <emphasis role="bold">FAIL –</emphasis> 
                <itemizedlist>
                    <listitem>
                        <para>
                            None.

                        </para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>



    </appendix>
</book>